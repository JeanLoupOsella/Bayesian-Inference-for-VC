# Using the Beta-binomial for Modeling a Seed Fund's Probability of Investing into a Future Unicorn

### Overview
This model can be combined with the [Markov-Dirichlet Model](https://github.com/JeanLoupOsella/Use-of-Bayesian-Inference-in-Venture-Capital/blob/main/Markov-Dirichlet%20Model) to model the uncertainty around
the probability of investing into a future unicorn at the seed stage. The binary nature of the experiment ("Does the startup becomes a unicorn?") makes it perfect for using the beta-binomial distribution, which can
model a certain level of uncertainty around the probability p of a binomial distribution. Essentially, after the Markov-Dirichlet model gives us an estimation of the probability p with a confidence interval, we can use
those results at the fund level to model the possible performance of the fund. 

The **beta-binomial distribution** can be used to model the uncertainty at the probability level, where we want to incorporate the fact that the true probability could not be exactly the one given by the
Markov-Dirichlet model, especially when starting to use the model. This can be done by modifying the alpha and beta parameter, and reduce the uncertainty as the fund get more data. 

The **Gamma distribution** can be used to model the uncertainty around the multiples generated by those unicorns during an exit. This will allow to model the fund multiple (TVPI) and the probability of achieving a TVPI target
with current parameters. The Gamma distribution is great for this because:

- It models positive-only outcomes (no negative multiples).
- It can be tuned to be "right-skewed" (some massive outliers, typical for unicorn exits).

Ultimately, the goal is to answer the following question: **"Given a certain probability of investing at the Seed stage in a future unicorn, what is the probability of achieving a certain TVPI?"**

### Description and Assumption of the Model

We will take the example of a $50M Seed fund, which will invest $1M into 40 startups during its lifetime (the other $10M being for management fees with a classic 2%-20% fee structure).  

For the beta-distribution, we will use the results from the [Markov-Dirichlet Model](https://github.com/JeanLoupOsella/Use-of-Bayesian-Inference-in-Venture-Capital/blob/main/Markov-Dirichlet%20Model) which in the example
gives a probability of 2.93% with a 95% CI of 2.58 % to 3.27 % to invest at the seed stage into a future unicorn. The following R script can help us quickly get correct alpha and beta parameters to model the uncertainty around 
that probability:

```
# Known values
mean_est <- 0.0293
lower_ci <- 0.0258
upper_ci <- 0.0327

# Approximate standard deviation
sigma_est <- (upper_ci - lower_ci) / (2 * 1.96)

# Function to solve for alpha given mean and sigma
solve_beta_parameters <- function(mean, sigma) {
  # Equation relating alpha and beta
  beta_from_alpha <- function(alpha) {
    alpha * (1 - mean) / mean
  }
  
  # Function to minimize (difference between target variance and computed variance)
  objective <- function(alpha) {
    beta <- beta_from_alpha(alpha)
    var_theoretical <- (alpha * beta) / ((alpha + beta)^2 * (alpha + beta + 1))
    var_target <- sigma^2
    return((var_theoretical - var_target)^2)
  }
  
  # Optimize to find alpha
  result <- optimize(objective, c(0.0001, 10000))
  alpha_est <- result$minimum
  beta_est <- beta_from_alpha(alpha_est)
  
  return(list(alpha = alpha_est, beta = beta_est))
}

# Solve
params <- solve_beta_parameters(mean_est, sigma_est)
params
```

In our case, this will give us **alpha = 2.735** and **beta = 90.649**.

For the Gamma distribution, we will assume that the average multiple at the unicorn level for a seed investor is x100, but can as low as x60 and as high as x200 (again, those numbers are just examples and each investor
can adapt them to their case).

A quick way to find Gamma parameters is:

```
gamma_params <- function(mean, sd) {
  rate <- mean / (sd^2)
  shape <- mean * rate
  return(list(shape = shape, rate = rate))
}

# Let's assume SD ~ 30 (so that 95% range is about mean ± 2*SD)
params <- gamma_params(mean = 100, sd = 30)
params

```

This gives us a **Shape = 11.11** and **Rate = 0.111**.

### Model 

```
# Load necessary library
library(VGAM)

# Parameters
n_investments <- 40
investment_per_startup <- 1e6  # $1M per startup
total_invested <- n_investments * investment_per_startup  # $40M

# Beta prior parameters
alpha <- 2.735
beta <- 90.649

# Gamma distribution parameters for unicorn multiples
mean_multiple <- 100
sd_multiple <- 30

# Calculate Gamma parameters
gamma_params <- function(mean, sd) {
  rate <- mean / (sd^2)
  shape <- mean * rate
  return(list(shape = shape, rate = rate))
}
params <- gamma_params(mean_multiple, sd_multiple)

# Simulation function
simulate_fund_TVPI <- function(n_simulations = 10000, n_investments, alpha, beta, gamma_shape, gamma_rate) {
  fund_TVPIs <- numeric(n_simulations)
  unicorn_counts <- integer(n_simulations)
  
  for (i in 1:n_simulations) {
    # Sample unicorn probability
    p <- rbeta(1, alpha, beta)
    # Sample number of unicorns
    n_unicorns <- rbinom(1, n_investments, p)
    unicorn_counts[i] <- n_unicorns
    
    # Sample exit multiples for each unicorn
    unicorn_multiples <- rgamma(n_unicorns, shape = gamma_shape, rate = gamma_rate)
    
    # Calculate total return
    total_return <- sum(unicorn_multiples * investment_per_startup)
    
    # Calculate TVPI
    tvpi <- total_return / total_invested
    fund_TVPIs[i] <- tvpi
  }
  
  return(list(fund_TVPIs = fund_TVPIs, unicorn_counts = unicorn_counts))
}

# Run simulation
set.seed(123)
n_simulations <- 10000
results <- simulate_fund_TVPI(n_simulations, n_investments, alpha, beta, params$shape, params$rate)

fund_TVPIs <- results$fund_TVPIs
unicorn_counts <- results$unicorn_counts

# --- Unicorn Analysis ---

# Histogram of number of unicorns
hist(unicorn_counts, breaks = -0.5:max(unicorn_counts)+0.5, col = "lightblue",
     main = "Number of Unicorns per Fund", xlab = "Number of Unicorns", ylab = "Number of Funds")

# Calculate probabilities
mean_unicorns <- mean(unicorn_counts)
median_unicorns <- median(unicorn_counts)

prob_1_or_more <- mean(unicorn_counts >= 1)
prob_2_or_more <- mean(unicorn_counts >= 2)
prob_3_or_more <- mean(unicorn_counts >= 3)

cat("Mean number of unicorns per fund:", round(mean_unicorns, 2), "\n")
cat("Median number of unicorns per fund:", median_unicorns, "\n")
cat("Probability of at least 1 unicorn:", round(100 * prob_1_or_more, 1), "%\n")
cat("Probability of at least 2 unicorns:", round(100 * prob_2_or_more, 1), "%\n")
cat("Probability of at least 3 unicorns:", round(100 * prob_3_or_more, 1), "%\n")

# --- TVPI Analysis ---

# Histogram of fund TVPIs
hist(fund_TVPIs, breaks = 50, col = "lightgreen", border = "white",
     main = "Simulated Fund TVPI Distribution",
     xlab = "Fund TVPI", ylab = "Number of Funds")

# Summary
mean_TVPI <- mean(fund_TVPIs)
median_TVPI <- median(fund_TVPIs)
prob_TVPI_above_2x <- mean(fund_TVPIs > 2)
prob_TVPI_above_3x <- mean(fund_TVPIs > 3)

cat("\nMean Fund TVPI:", round(mean_TVPI, 2), "\n")
cat("Median Fund TVPI:", round(median_TVPI, 2), "\n")
cat("Probability of TVPI > 2x:", round(100 * prob_TVPI_above_2x, 1), "%\n")
cat("Probability of TVPI > 3x:", round(100 * prob_TVPI_above_3x, 1), "%\n")

```

### Results

```
Mean number of unicorns per fund: 1.18
Median number of unicorns per fund: 1
Probability of at least 1 unicorn: 63.7 %
Probability of at least 2 unicorns: 31.6 %
Probability of at least 3 unicorns: 14 %

Mean Fund TVPI: 2.94
Median Fund TVPI: 2.29
Probability of TVPI > 2x: 54.9 %
Probability of TVPI > 3x: 38.7 %

```

![Capture d'écran 2025-04-28 165836](https://github.com/user-attachments/assets/5b7fc46f-e869-48f8-addd-1946bdc9e6bb)
![Capture d'écran 2025-04-28 165939](https://github.com/user-attachments/assets/6ab5bdb8-5590-41dc-8615-b68fe923bdfa)

### Improvements

Here the model focus only on unicorns and their multiples. A more precise model could take into account partial exits, generating lower multiples but still somewhat contributing to the fund performance, especially
for later stage funds, or use another event as success ("liquidity event" instead of "unicorn" as big multiples can also come from non-unicorn startups, especially in Europe where valuations are less inflated). 
